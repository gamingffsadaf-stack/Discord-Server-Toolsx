import discord
from discord.ext import commands
import asyncio

# ---------- CONFIG ----------
TRIGGER = ""       # Trigger word to start creating
CHANNEL_NAME = ""       # Base name of channels
CHANNEL_COUNT = 20               # How many channels to create
BATCH_SIZE = 5                   # How many channels to create at once
BATCH_DELAY = 3                  # Delay in seconds between batches
GUILD_ID = 123456789012345678    # Replace with your server ID
# ----------------------------

intents = discord.Intents.default()
intents.guilds = True
intents.message_content = True

bot = commands.Bot(command_prefix="", intents=intents)

@bot.event
async def on_ready():
    print(f"Logged in as {bot.user}")

async def create_channel(guild, name):
    try:
        channel = await guild.create_text_channel(name)
        print(f"Created channel: {name}")
        return channel
    except discord.Forbidden:
        print(f"No permission to create channel: {name}")
        return None
    except discord.HTTPException as e:
        print(f"Failed to create channel {name}: {e}")
        return None

@bot.event
async def on_message(message):
    if message.author.bot:
        return

    if message.content.lower().strip() == TRIGGER.lower():
        guild = bot.get_guild(GUILD_ID)
        if not guild:
            print("Bot is not in the specified guild.")
            return

        tasks = []
        for i in range(CHANNEL_COUNT):
            channel_name = f"{CHANNEL_NAME}-{i+1}"
            tasks.append(create_channel(guild, channel_name))

            # Run in batches
            if len(tasks) >= BATCH_SIZE:
                await asyncio.gather(*tasks)
                tasks.clear()
                await asyncio.sleep(BATCH_DELAY)

        # Finish any remaining channels
        if tasks:
            await asyncio.gather(*tasks)

bot.run("YOUR_BOT_TOKEN")
